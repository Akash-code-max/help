{
  "1a": {
    "index_html": "<!DOCTYPE html><html><head> <title>Simple Calculator</title></head><body> <h2>Simple Calculator</h2> <form method=\"post\" action=\"CalcServlet\"> Number 1: <input type=\"text\" name=\"t1\"><br><br> Number 2: <input type=\"text\" name=\"t2\"><br><br> <input type=\"submit\" value=\"+\" name=\"btn\"> <input type=\"submit\" value=\"-\" name=\"btn\"> <input type=\"submit\" value=\"*\" name=\"btn\"> <input type=\"submit\" value=\"/\" name=\"btn\"> </form></body></html>",
    "calc_servlet_java": "import java.io.*;\nimport javax.servlet.*;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.*;\n\n@WebServlet(\"/CalcServlet\")\npublic class Calcservlet extends HttpServlet {\n  public void doPost(HttpServletRequest request, HttpServletResponse response)\n  throws ServletException, IOException {\n    response.setContentType(\"text/html\");\n    PrintWriter out = response.getWriter();\n    try {\n      int a = Integer.parseInt(request.getParameter(\"t1\"));\n      int b = Integer.parseInt(request.getParameter(\"t2\"));\n      String op = request.getParameter(\"btn\");\n      int result = 0;\n\n      if (op.equals(\"+\")) {\n        result = a + b;\n      } else if (op.equals(\"-\")) {\n        result = a - b;\n      } else if (op.equals(\"*\")) {\n        result = a * b;\n      } else if (op.equals(\"/\")) {\n        if (b == 0) {\n          out.println(\"<h3>Error: Cannot divide by zero.</h3>\");\n          return; \n        }\n        result = a / b;\n      }\n\n      out.println(\"<html><body>\");\n      out.println(\"<h2>Calculation Result</h2>\");\n      out.println(\"<h3><b>\" + a + \" \" + op + \" \" + b + \" = \" + result + \"</b></h3>\");\n      out.println(\"<a href='index.html'>Go Back</a>\");\n      out.println(\"</body></html>\");\n    } catch (NumberFormatException e) {\n      out.println(\"<h3>Error: Please enter valid integers.</h3>\");\n      out.println(\"<a href='index.html'>Go Back</a>\");\n    }\n  }\n}"
  },
  "2b": {
    "cookie_servlet_java": "import java.io.*;\nimport javax.servlet.*;\nimport javax.servlet.http.*;\nimport javax.servlet.annotation.WebServlet;\n\n@WebServlet(\"/CookieServlet\")\npublic class CookieServlet extends HttpServlet {\n  public void doGet(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException {\n    response.setContentType(\"text/html\");\n    PrintWriter out = response.getWriter();\n    int visitCount = 1;\n    Cookie[] cookies = request.getCookies();\n    Cookie visitCookie = null;\n\n    if (cookies != null) {\n      for (Cookie c : cookies) {\n        if (c.getName().equals(\"visit\")) {\n          visitCookie = c;\n          break;\n        }\n      }\n    }\n\n    if (visitCookie != null) {\n      try {\n        visitCount = Integer.parseInt(visitCookie.getValue()) + 1;\n        out.println(\"<h2>Welcome back!</h2>\");\n        out.println(\"<h3>You have visited this page \" + visitCount + \" times.</h3>\");\n      } catch (NumberFormatException e) {\n        out.println(\"Welcome! It seems your visit count is corrupted. We are resetting it.\");\n        visitCount = 1;\n      }\n    } else {\n      out.println(\"<h2>Welcome!</h2>\");\n      out.println(\"<h3>This is the first time you are visiting this page.</h3>\");\n    }\n\n    Cookie newCookie = new Cookie(\"visit\", String.valueOf(visitCount));\n    newCookie.setMaxAge(60 * 60 * 24);\n    response.addCookie(newCookie);\n  }\n}"
  },
  "3a": {
    "upload_html": "<!DOCTYPE html><html><head> <title>File Upload</title> <meta charset=\"UTF-8\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"></head><body> <h1>File Upload</h1> <form action=\"FileUploadServlet\" method=\"post\" enctype=\"multipart/form-data\"> Select File to Upload: <input type=\"file\" name=\"file\" id=\"file\" required> <br><br> Destination: <input type=\"text\" value=\"C:/tmp\" name=\"destination\"> <br><br> <input type=\"submit\" value=\"Upload File\" name=\"upload\" id=\"upload\"> </form></body></html>",
    "fileupload_servlet_java": "package com.myapp.servlets;\n\nimport java.io.*;\nimport javax.servlet.*;\nimport javax.servlet.annotation.MultipartConfig;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.*;\n\n@WebServlet(\"/FileUploadServlet\")\n@MultipartConfig\npublic class FileUploadServlet extends HttpServlet {\n  @Override\n  protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    response.setContentType(\"text/html\");\n    PrintWriter out = response.getWriter();\n    try {\n      String path = request.getParameter(\"destination\");\n      Part filePart = request.getPart(\"file\");\n      String originalFilename = new File(filePart.getSubmittedFileName()).getName();\n      try (OutputStream os = new FileOutputStream(new File(path + File.separator + originalFilename)); InputStream is = filePart.getInputStream()) {\n        byte[] buffer = new byte[1024];\n        int read;\n        while ((read = is.read(buffer)) != -1) {\n          os.write(buffer, 0, read);\n        }\n        out.println(\"<h3>File '\" + originalFilename + \"' uploaded successfully.</h3>\");\n      }\n    } catch (Exception ex) {\n      out.println(\"<h3>An error occurred: \" + ex.getMessage() + \"</h3>\");\n    }\n  }\n}",
    "download_html": "<!DOCTYPE html><html><head> <title>File Download</title></head><body> <h1>File Download Application</h1> <p>Click <a href=\"DownloadServlet?filename=SampleChapter.pdf\">Sample Chapter</a> to download.</p> <p>Click <a href=\"DownloadServlet?filename=TOC.pdf\">Table Of Contents</a> to download.</p></body></html>",
    "download_servlet_java": "package com.myapp.servlets;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletOutputStream;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@WebServlet(\"/DownloadServlet\")\npublic class DownloadServlet extends HttpServlet {\n  private static final String DOWNLOAD_DIRECTORY = \"C:/tmp/\";\n\n  @Override\n  protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    String filename = request.getParameter(\"filename\");\n    if (filename == null || filename.isEmpty()) {\n      response.getWriter().println(\"Error: Filename not provided.\");\n      return;\n    }\n    String sanitizedFilename = new File(filename).getName();\n    File fileToDownload = new File(DOWNLOAD_DIRECTORY + sanitizedFilename);\n    if (!fileToDownload.exists()) {\n      response.sendError(404, \"The file '\" + sanitizedFilename + \"' was not found in \" + DOWNLOAD_DIRECTORY);\n      return;\n    }\n    response.setContentType(\"application/octet-stream\");\n    response.setHeader(\"Content-Disposition\", \"attachment; filename=\\\"\" + sanitizedFilename + \"\\\"\");\n    response.setContentLength((int) fileToDownload.length());\n    try (InputStream inputStream = new FileInputStream(fileToDownload); ServletOutputStream outputStream = response.getOutputStream()) {\n      byte[] buffer = new byte[4096];\n      int bytesRead;\n      while ((bytesRead = inputStream.read(buffer)) != -1) {\n        outputStream.write(buffer, 0, bytesRead);\n      }\n    }\n  }\n}"
  },
  "4a": {
    "index_jsp": "<html><body> <form action=\"implicitObjectEx.jsp\"> Enter your name:<input type=\"text\" name=\"myname\"><br> Enter your email id:<input type=\"text\" name=\"mymailid\"><br> <input type=\"submit\" value=\"submit\"> </form></body></html>",
    "implicitObjectEx_jsp": "<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<html>\n<head> <title>JSP Page</title></head>\n<body>\n  <h1>Use of Intrinsic Objects in JSP</h1>\n  <h1>Request Object</h1>\n  Query String: <%=request.getQueryString() %><br>\n  Context Path: <%=request.getContextPath() %><br>\n  Remote Host: <%=request.getRemoteHost() %><br>\n  <h1>Response Object</h1>\n  Character Encoding Type: <%=response.getCharacterEncoding() %><br>\n  Content Type: <%=response.getContentType() %><br>\n  Locale: <%=response.getLocale() %><br>\n  <h1>Session Object</h1>\n  ID: <%=session.getId() %><br>\n  Creation Time: <%=new java.util.Date(session.getCreationTime()) %><br>\n  Last Access Time: <%=new java.util.Date(session.getLastAccessedTime()) %><br>\n</body>\n</html>"
  },
  "6a": {
    "index_html": "<html><head><title>Currency Converter</title></head><body> <form action=\"CCServlet\"> Enter Amount <input type=\"text\" name=\"amt\"><br> Select Conversion Type <input type=\"radio\" name=\"type\" value=\"r2d\" checked>Rupees to Dollar <input type=\"radio\" name=\"type\" value=\"d2r\">Dollar to Rupees<br> <input type=\"reset\"><input type=\"submit\" value=\"CONVERT\"> </form></body></html>",
    "ccbean_local_java_interface": "package mybeans;\n\nimport javax.ejb.Local;\n\n@Local\npublic interface CCBeanLocal {\n  public double r2Dollar (double r);\n  public double d2Rupees (double d);\n}",
    "ccbean_java_implementation": "package mybeans;\n\nimport javax.ejb.Stateless;\n\n@Stateless\npublic class CCBean implements CCBeanLocal {\n  @Override\n  public double r2Dollar(double r) {\n    return r / 65.65;\n  }\n\n  @Override\n  public double d2Rupees(double d) {\n    return d * 65.65;\n  }\n}",
    "ccservlet_java": "package mypack;\n\nimport java.io.*;\nimport javax.servlet.*;\nimport javax.servlet.http.*;\nimport javax.ejb.EJB;\nimport mybeans.CCBeanLocal;\nimport javax.servlet.annotation.WebServlet;\n\n@WebServlet(name = \"CCServlet\", urlPatterns = {\"/CCServlet\"})\npublic class CCServlet extends HttpServlet {\n  @EJB\n  CCBeanLocal obj;\n\n  protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    response.setContentType(\"text/html;charset=UTF-8\");\n    try (PrintWriter out = response.getWriter()) {\n      double amt = Double.parseDouble(request.getParameter(\"amt\"));\n      if (request.getParameter(\"type\").equals(\"r2d\")) {\n        out.println(\"<h1>\" + amt + \" Rupees = \" + obj.r2Dollar(amt) + \" Dollars</h1>\");\n      }\n      if (request.getParameter(\"type\").equals(\"d2r\")) {\n        out.println(\"<h1>\" + amt + \" Dollars = \" + obj.d2Rupees(amt) + \" Rupees</h1>\");\n      }\n    }\n  }\n\n  @Override\n  protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    processRequest(request, response);\n  }\n\n  @Override\n  protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    processRequest(request, response);\n  }\n}"
  }
}